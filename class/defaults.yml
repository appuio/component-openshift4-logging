parameters:
  openshift4_logging:
    =_openshift4_console:
      "True":
        config:
          plugins:
            - "logging-view-plugin"
      "False": {}

    namespace: openshift-logging
    version: '5.8'
    channel: 'stable-${openshift4_logging:version}'
    alerts: 'release-${openshift4_logging:version}'

    ignore_alerts:
      - ElasticsearchHighFileDescriptorUsage
      - ElasticsearchOperatorCSVNotSuccessful
      - FluentdQueueLengthIncreasing

    components:
      lokistack:
        enabled: false
        clusterReaderLogAccess:
          - application
          - infrastructure
        logStore:
          access_key_id: ''
          access_key_secret: ''
          endpoint: ''
          bucketnames: '${cluster:name}-logstore'
        spec:
          size: 1x.demo
          storage:
            schemas:
              - version: v12
                effectiveDate: '2022-06-01'
            secret:
              type: s3
              name: loki-logstore
          storageClassName: ''
          tenants:
            mode: openshift-logging
          limits:
            global:
              ingestion:
                ingestionBurstSize: 9
                ingestionRate: 5
      elasticsearch:
        enabled: true
        kibana_host: null
        predict_elasticsearch_storage_alert:
          enabled: true
          lookback_range: 72h
          predict_hours_from_now: 72
          threshold: 85
          for: 6h
          severity: warning

    clusterLogging:
      managementState: Managed
      logStore:
        type: elasticsearch
        lokistack:
          name: loki
        elasticsearch:
          nodeCount: 3
          storage:
            size: 200Gi
          redundancyPolicy: SingleRedundancy
          nodeSelector:
            node-role.kubernetes.io/infra: ''
        retentionPolicy:
          application:
            maxAge: 7d
            pruneNamespacesInterval: 15m
          infra:
            maxAge: 30d
            pruneNamespacesInterval: 15m
          audit:
            maxAge: 30d
            pruneNamespacesInterval: 15m
      visualization:
        type: kibana
        kibana:
          replicas: 2
          nodeSelector:
            node-role.kubernetes.io/infra: ''
      collection:
        type: fluentd

    clusterLogForwarding:
      enabled: false
      forwarders: {}
      namespace_groups: {}
      application_logs: {}
      audit_logs:
        enabled: false
      infrastructure_logs:
        enabled: true
      json:
        enabled: false
        typekey: 'kubernetes.labels.logFormat'
        typename: 'nologformat'

    operatorResources:
      clusterLogging:
        requests:
          memory: 128Mi
          cpu: 10m
        limits:
          memory: 256Mi
      lokistack:
        requests:
          memory: 381Mi
          cpu: 50m
        limits:
          memory: 512Mi
      elasticsearch:
        requests:
          memory: 1Gi
          cpu: 100m
        limits:
          memory: 1.5Gi

  openshift4_elasticsearch_operator:
    targetNamespaces:
      - ${openshift4_logging:namespace}

  openshift4_console: ${openshift4_logging:_openshift4_console:${openshift4_logging:components:lokistack:enabled}}
